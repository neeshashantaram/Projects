//Code for encryption and decryption of a given string with a key in Assembly Language

ORG 00H
SRC EQU 30H
KEY EQU 40H
DST EQU 50H
DD EQU 60H
CNT EQU 8H

MOV R2,#CNT         
MOV R0,#SRC

;ENCRYPTION
BACK:
MOV 0F0H,@R0   
MOV A,#CNT
SUBB A,R2 
ADD A,#KEY
MOV R1,A
MOV A,@R1
ADD A,#DST
MOV R1,A
MOV @R1,0F0H
INC R0
DJNZ R2,BACK 
MOV R0,#DST
MOV R2,#CNT
MOV R3,#KEY
MOV R4,#DD


;DECRYPTION
BACK1 : 
MOV A,R3
MOV R1,A
MOV A,@R1
ADD A,#50H
MOV R1,A
MOV A,@R1
MOV R5,A
MOV A,R4
MOV R0,A
MOV A,R5
MOV @R0,A
MOV A,R0
MOV R4,A
INC R4
INC R3
DJNZ R2,BACK1
end